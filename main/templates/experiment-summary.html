{% extends 'base.html' %}

{% block content %}

<dl class="row">
  <dt class="col-sm-3">Name</dt>
  <dd class="col-sm-9">{{ experiment.name }}</dd>
  <dt class="col-sm-3">Description</dt>
  <dd class="col-sm-9">{{ experiment.description }}</dd>
  <dt class="col-sm-3">Researcher</dt>
  <dd class="col-sm-9">{{ experiment.researcher.first_name }} {{ experiment.researcher.last_name }}</dd>
  <dt class="col-sm-3">Genome</dt>
  <dd class="col-sm-9">{{ guide_design.genome }}</dd>
  <dt class="col-sm-3">PAM</dt>
  <dd class="col-sm-9">{{ guide_design.pam }}</dd>
  {% if guide_design.tag_in %}
  <dt class="col-sm-3">Tag</dt>
  <dd class="col-sm-9">{{ guide_design.tag_in }}</dd>
  {% endif %}
  <dt class="col-sm-3">Primer Temp</dt>
  <dd class="col-sm-9">{{ primer_design.primer_temp }}</dd>
  <dt class="col-sm-3">Max Amplicon Length</dt>
  <dd class="col-sm-9">{{ primer_design.max_amplicon_length }}</dd>
  <dt class="col-sm-3">Number of Wells</dt>
  <dd class="col-sm-9">{{ sheet|length }}</dd>

  <dt class="col-sm-12">&nbsp;</dt>

  <dt class="col-sm-3">
    IDT Guide Order Form
  </dt>
  <dd class="col-sm-9">
    <a target="_blank" href="{{ guide_selection.order_form_url }}">
      Download
    </a>
    &rarr;
    <a target="_blank" href="https://www.idtdna.com/site/order/plate/index/crispr">
      Upload
    </a>
  </dd>

  <dt class="col-sm-3">
    IDT Primer Order Form
  </dt>
  <dd class="col-sm-9">
    <a target="_blank" href="{{ primer_selection.order_form_url }}">
      Download
    </a>
    &rarr;
    <a target="_blank" href="https://www.idtdna.com/site/order/plate/index/primermix/1799">
      Upload
    </a>
  </dd>

  <dt class="col-sm-3">
    Illumina Sample Sheet
  </dt>
  <dd class="col-sm-9">
    <a target="_blank" href="{{ primer_selection.illumina_sheet_url }}">
      Download
    </a>
    &rarr;
    {# TODO (gdingle): illumina_sheet_url upload URL #}
    <a target="_blank" href="TODO">
      Upload
    </a>
  </dd>

</dl>

<small>
  <a href="./?download=xls">Download table as Excel</a>
</small>
<table class="table">
  <thead class="thead-light">
    <tr>
      {% for col in sheet.columns %}
      <th>{{ col }} </th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    {% for row in sheet.values %}
    <tr>
      {% for cell in row %}
      <td title="{{ cell }}">
        {{ cell|truncatechars:20 }}
      </td>
      {% endfor %}
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
