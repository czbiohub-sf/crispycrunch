{% extends 'base.html' %}

{% block content %}

<dl class="row">
  <dt class="col-sm-3">Name</dt>
  <dd class="col-sm-9">{{ experiment.name }}</dd>
  <dt class="col-sm-3">Description</dt>
  <dd class="col-sm-9">{{ experiment.description }}</dd>
  <dt class="col-sm-3">Researcher</dt>
  <dd class="col-sm-9">{{ experiment.researcher.first_name }} {{ experiment.researcher.last_name }}</dd>
  <dt class="col-sm-3">Genome</dt>
  <dd class="col-sm-9">{{ guide_design.genome }}</dd>
  <dt class="col-sm-3">PAM</dt>
  <dd class="col-sm-9">{{ guide_design.pam }}</dd>
  {% if guide_design.tag_in %}
  <dt class="col-sm-3">Tag</dt>
  <dd class="col-sm-9">{{ guide_design.tag_in }}</dd>
  {% endif %}
  <dt class="col-sm-3">Primer Temp</dt>
  <dd class="col-sm-9">{{ primer_design.primer_temp }}</dd>
  <dt class="col-sm-3">Max Amplicon Length</dt>
  <dd class="col-sm-9">{{ primer_design.max_amplicon_length }}</dd>
  <dt class="col-sm-3">Number of Wells</dt>
  <dd class="col-sm-9">{{ sheet|length }}</dd>
</dl>

<table class="table">
  <thead class="thead-light">
    <tr>
      {% for col in sheet.columns %}
      <th>{{ col }} </th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    {% for row in sheet.values %}
    <tr>
      {% for cell in row %}
      <td title="{{ cell }}">
        {{ cell|truncatechars:20 }}
      </td>
      {% endfor %}
    </tr>
    {% endfor %}
  </tbody>
</table>


{# TODO: link to upload page #}
<h2>Ordering</h2>
<dl class="row">
  <dt class="col-sm-3">
    <a target="_blank" href="{{ guide_selection.order_form_url }}">
      Guide order form
    </a>
  </dt>
  <dd class="col-sm-9">
    <a target="_blank" href="https://www.idtdna.com/site/order/plate/index/crispr">
      &rarr; Upload page
    </a>
  </dd>
  <dt class="col-sm-3">
    {# TODO: upload page for primers... don't see it at https://www.idtdna.com/pages/products/crispr-genome-editing/alt-r-crispr-cas9-system #}
    <a target="_blank" href="{{ primer_selection.order_form_url }}">
      Primer order form
    </a>
  </dt>
  <dd class="col-sm-9">
    <a target="_blank" href="TODO">
      &rarr; Upload page
    </a>
  </dd>
</dl>

<hr></hr>
{# TODO better footer #}
<p>
  <a href="/main/experiment">New experiment</a>
</p>
<p>
  {# TODO: prefill experiment ID? #}
  <a href="/main/analysis">Analysis</a>
</p>

{% endblock %}
